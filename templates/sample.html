{% extends "layout.html" %}
{% block content %}
<div class="container mt-4">

  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Home</a></li>
      <li class="breadcrumb-item"><a href="/conditions">Conditions</a></li>
      <li class="breadcrumb-item active" aria-current="page">Sample Dataset</li>
    </ol>
  </nav>

  <h2 class="mb-3">🎯 Sample Dataset</h2>
  <p class="text-muted">Step 4 of 6 · Create a subset for rapid SAS analysis (up to 20,000 rows).</p>

  <!-- Preview Button
  <form method="POST" class="text-end mb-4">
    <button class="btn btn-outline-primary" type="submit">🔍 Preview Sample</button>
  </form>  -->

  {% if n %}
  <div class="alert alert-success">
    ✅ Successfully sampled <strong>{{ n }}</strong> rows from your dataset.
  </div>

  <!-- 3 Button Layout -->
  <div class="d-flex flex-wrap gap-3 justify-content-start mt-3">
    <a href="{{ url_for('download_file', filename=filename) }}" class="btn btn-outline-primary">
      ⬇️ Download Sampled Dataset
    </a>
    <a href="/config-analysis" class="btn btn-success">
      📊 Configure SAS Analysis
    </a>
    <a href="/config-visual" class="btn btn-info text-black">
      📈 Configure Visualizations
    </a>
  </div>
  {% endif %}

  {% if summary %}
  <div class="card mt-4 mb-4">
    <div class="card-header">📊 Sample Summary (Top 10 Fields)</div>
    <div class="card-body table-responsive">
      {{ summary|safe }}
    </div>
  </div>
  {% endif %}

  {% if preview %}
  <div class="card">
    <div class="card-header">👀 Sample Preview (First 10 Rows)</div>
    <div class="card-body table-responsive">
      {{ preview|safe }}
    </div>
  </div>
  {% endif %}

</div>
{% endblock %}
