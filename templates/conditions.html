{% extends "layout.html" %}
{% block content %}
<div class="container mt-4">

  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Home</a></li>
      <li class="breadcrumb-item"><a href="/columns">Selected Columns</a></li>
      <li class="breadcrumb-item active" aria-current="page">Add Derived Columns</li>
    </ol>
  </nav>

  <h2 class="mb-3">🧠 Add Conditional Columns</h2>
  <p class="text-muted">Step 3 of 6 · Create new columns based on conditions across existing fields.</p>

  <form method="POST">
    <!-- Your dynamic conditional column UI goes here (JS-powered) -->
    <!-- This might include fields like: column name, condition group, etc. -->
    {{ form_body|safe if form_body is defined }}

    <div class="text-end mt-4 d-flex justify-content-between">
      <!-- Skip button -->
      <a href="/skip-conditions" class="btn btn-outline-secondary">
        ⏭️ Skip and Continue without Adding Columns
      </a>

      <button type="submit" class="btn btn-success">
        ➕ Save Columns and Continue
      </button>

    </div>
  </form>

  {% if preview_table %}
  <div class="card mt-4">
    <div class="card-header">👁️ Preview with New Columns</div>
    <div class="card-body table-responsive">
      {{ preview_table|safe }}
    </div>
  </div>
  {% endif %}

</div>
{% endblock %}
